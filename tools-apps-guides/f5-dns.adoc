---
permalink: tools-apps-guides/f5-dns.html 
sidebar: sidebar 
keywords: gslb,f5, multi-site,storagegrid,ha,high-availability,load balancer,load balancing,DNS,BIG-IP 
summary: Dieser technische Bericht enthält detaillierte Anweisungen zur Konfiguration von NetApp StorageGRID mit F5 DNS-Diensten für den globalen Lastausgleich. 
---
= Verwenden Sie F5 DNS für den globalen Lastausgleich von StorageGRID.
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Von Steve Gorman (F5)

Dieser technische Bericht enthält detaillierte Anweisungen zur Konfiguration von NetApp StorageGRID mit F5 DNS-Diensten für den globalen Lastausgleich, um eine bessere Datenverfügbarkeit und höhere Datenkonsistenz zu erreichen sowie das S3-Transaktionsrouting zu optimieren, wenn Ihr Grid über mehrere Standorte und/oder HA-Gruppen verteilt ist.



== Einführung

Die F5 BIG-IP DNS-Lösung, die früher BIG-IP GTM (Global Traffic Manager) und informell GSLB (Global Server Load Balancing) genannt wurde, ermöglicht einen nahtlosen Zugriff über mehrere aktive HA-Gruppen und aktive, standortübergreifende StorageGRID Lösungen hinweg.



== F5 BIG-IP Multi-Site StorageGRID -Konfiguration

Unabhängig von der Anzahl der zu unterstützenden StorageGRID Standorte müssen mindestens zwei BIG-IP-Appliances, physisch oder virtuell, über das aktivierte und eingerichtete BIG-IP-DNS-Modul verfügen. Je mehr DNS-Appliances, desto größer ist der Grad an Redundanz, von dem ein Unternehmen profitiert.



=== BIG-IP DNS – Erste Schritte bei der Ersteinrichtung

Sobald die BIG-IP-Appliance mindestens initial provisioniert wurde, verwenden Sie einen Webbrowser, um sich in die TMUI (BIG-IP GUI)-Oberfläche einzuloggen und wählen Sie System -> Ressourcenbereitstellung. Wie bereits erwähnt, muss sichergestellt werden, dass das Modul „Global Traffic (DNS)“ ein Häkchen aufweist und als lizenziert angezeigt wird. Beachten Sie, dass es, wie im Bild dargestellt, üblich ist, dass „Local Traffic (LTM)“ auf demselben Gerät bereitgestellt werden kann.

image:f5-dns/global-traffic.png["Globaler DNS-Dienst aktiviert"]



=== DNS-Protokoll-Grundelemente konfigurieren

Der erste Schritt zur globalen Verkehrssteuerung für StorageGRID -Sites besteht darin, die Registerkarte DNS auszuwählen, wo praktisch die gesamte globale Verkehrssteuerung konfiguriert wird, und dann Einstellungen-> GLSB auszuwählen. Aktivieren Sie die beiden Synchronisierungsoptionen und wählen Sie einen DNS-Gruppennamen, der von allen teilnehmenden BIG-IP-Appliances gemeinsam genutzt werden soll.

image:f5-dns/dns-group-name.png["DNS-Gruppenname"]

Navigieren Sie anschließend zu DNS > Zustellung > Profile > DNS: Erstellen und erstellen Sie ein Profil, das die DNS-Funktionen steuert, die Sie aktivieren oder deaktivieren möchten. Wenn Sie an der Generierung spezifischer DNS-Protokolle interessiert sind, finden Sie den vorherigen Link zum DNS-Schulungsleitfaden. Hier ist ein Beispiel für ein funktionierendes DNS-Profil. Beachten Sie die vier Hervorhebungen, die wichtige Werte für die Einstellungen darstellen. Zur Verdeutlichung wird jede mögliche Einstellung im folgenden F5 KB-Artikel (Wissensdatenbank) erläutert. https://my.f5.com/manage/s/article/K21520582["Hier"^]Die

image:f5-dns/dns-profile.png["DNS-Profileinstellungen"]

An dieser Stelle können wir die Eigenschaften der UDP- und TCP-Protokolle über erstellte „Profile“ anpassen, die beide DNS-Verkehr mit BIG-IP übertragen können. Erstellen Sie einfach ein neues Profil für UDP und TCP. Unter der Annahme, dass der DNS-Datenverkehr WAN-Verbindungen durchläuft, ist es eine gute Vorgehensweise, einfach die UDP- und TCP-Eigenschaften zu übernehmen, die bekanntermaßen in WAN-Umgebungen gut funktionieren. Um ein Protokoll hinzuzufügen, klicken Sie einfach auf das „+“-Symbol neben dem jeweiligen Protokoll und legen Sie das übergeordnete Profil wie folgt fest:

UDP -> Verwende das „übergeordnete“ Profil „udp_gtm_dns“

TCP -> Verwenden Sie das „übergeordnete“ Profil „f5-tcp-wan“

image:f5-dns/dns-protocol.png["DNS-Protokoll"]

Jetzt müssen wir nur noch dem BIG-IP DNS eine IP-Adresse für den UDP- und TCP-Datenverkehr zuweisen. Für diejenigen, die mit BIG-IP LTM vertraut sind, handelt es sich im Wesentlichen um die Erstellung virtueller DNS-Server, und virtuelle Server benötigen „Listener“-IP-Adressen. Folgen Sie, wie im Screenshot dargestellt, den Pfeilen, um Listener/virtuelle Server für DNS/UDP und DNS/TCP zu erstellen.

image:f5-dns/listener-list1.png["Listener-IP hinzufügen"]

Nachfolgend ein Beispiel aus einem laufenden BIG-IP DNS-System. Darin sehen wir die Einstellungen des virtuellen TCP-Server-Listeners und können erkennen, wie viele der vorherigen Schritte miteinander verknüpft sind. Dies umfasst das Referenzieren des DNS-Profils und des Protokollprofils (TCP) sowie die Konfiguration einer gültigen IP-Adresse für die Verwendung durch DNS. Wie bei allen Objekten, die man mit BIG-IP erstellt, ist es hilfreich, einen aussagekräftigen Namen zu verwenden, der dazu dient, das Objekt selbst zu identifizieren, wie zum Beispiel dns/siteb/TCP53 im zugewiesenen Beispielnamen.

image:f5-dns/listener-list2.png["Hörerinformationen hinzufügen"]

Hiermit sind die vorbereitenden, in der Regel einmaligen Einrichtungsschritte einer BIG-IP-Appliance mit aktiviertem DNS-Modul abgeschlossen. An diesem Punkt sind wir bereit, uns den Details der Einrichtung einer globalen Traffic-Management-Lösung mit unseren Appliances zuzuwenden, die selbstverständlich mit den Eigenschaften der StorageGRID Standorte verknüpft sein wird.



=== Einrichtung von Rechenzentrumsstandorten und Etablierung der Inter-BIG-IP-Kommunikation in vier Schritten



==== Schritt eins: Rechenzentren erstellen

Jeder Standort, der Cluster von Knoten beherbergen soll, die lokal von BIG-IP LTM lastverteilt werden sollen, muss in BIG-IP DNS eingetragen werden. Dies muss nur auf einem BIG-IP DNS-Server erfolgen, da wir eine DNS-synchronisierte Gruppe zur Unterstützung des Traffic-Managements erstellen. Daher wird diese Konfiguration von allen DNS-Mitgliedern der Gruppe gemeinsam genutzt.

Wählen Sie über die TMUI-Benutzeroberfläche DNS > GSLB > Rechenzentren > Rechenzentrumsliste und erstellen Sie einen Eintrag für jeden StorageGRID Standort. Bei Verwendung eines Netzwerkaufbaus gemäß Abbildung 1 und DNS-Appliances an anderen Standorten als StorageGRID müssen zusätzlich zu den Speicherstandorten auch Rechenzentren für diese Standorte hinzugefügt werden. In diesem Beispiel werden die Standorte a und b in Ohio und Oregon erstellt, die BIG-IPs sind Dual-DNS- und LTM-Appliances.

image:f5-dns/datacenters.png["Rechenzentren erstellen"]



==== Schritt zwei: Server erstellen (Liste aller BIG-IP-Appliances in der Lösung)

Wir sind nun bereit, die einzelnen StorageGRID Standortcluster mit der BIG-IP-DNS-Konfiguration zu verbinden. Zur Erinnerung: Die BIG-IP-Appliance an jedem Standort übernimmt den eigentlichen Lastausgleich des S3-Datenverkehrs durch die Konfiguration virtueller Server, die eine erreichbare IP-Adresse/einen Port des „Front-Ends“ mit einem Satz von Back-End-„Pools“ von Storage Node-Appliances verbinden, wobei „Back-End“-IP-Adressen/Ports verwendet werden.

Sollten beispielsweise alle Speicherknoten in einem Pool aus administrativen Gründen offline genommen werden, etwa wegen der Stilllegung eines Standorts, oder unerwartet aufgrund fehlgeschlagener Echtzeit-Zustandsprüfungen, wird der Datenverkehr durch Änderung der DNS-Abfrageantworten auf andere Standorte umgeleitet.

Um die StorageGrid-Sites, insbesondere die lokalen virtuellen Server, mit der BIG-IP-DNS-Konfiguration auf jedem Gerät zu verknüpfen, muss die Einrichtung nur einmal durchgeführt werden. In einem nächsten Schritt werden die Konfigurationen aller BIG-IP DNS-Geräte synchronisiert.

Vereinfacht ausgedrückt erstellen wir eine Liste, die als Serverliste bezeichnet wird, aller unserer BIG-IP-Appliances, unabhängig davon, ob sie für DNS, LTM oder sowohl DNS als auch LTM lizenziert sind. Diese Masterliste wird nach Fertigstellung der Liste mit allen BIG-IP DNS-Appliances synchronisiert.

Auf einem BIG-IP DNS-lizenzierten Gerät wählen Sie DNS > GSLB > Server > Serverliste und klicken Sie auf die Schaltfläche "Hinzufügen" (+).

image:f5-dns/gslb-server-list.png["Server erstellen"]

Zu den vier wichtigsten Elementen beim Hinzufügen jedes BIG-IP gehören: * Die Auswahl von BIG-IP aus dem Produkt-Dropdown-Menü; andere Load Balancer sind zwar möglich, bieten aber im Allgemeinen nicht die Echtzeit-Transparenz und Reaktionsfähigkeit, wenn sich der Zustand der Backend-Knoten an den einzelnen Standorten verschlechtert. * Fügen Sie die IP-Adresse der BIG-IP DNS-Appliance hinzu. Beim erstmaligen Hinzufügen einer BIG-IP DNS-Appliance wird wahrscheinlich die Adresse der aktuell über die grafische Benutzeroberfläche aufgerufenen Appliance verwendet; zukünftige Appliances werden die Adressen der anderen Appliances in der Lösung verwenden. * Wählen Sie einen Health Monitor aus. Verwenden Sie immer „BIG-IP“, wenn der hinzuzufügende Load Balancer eine BIG-IP Appliance ist, um den Zustand der StorageGRID Knoten im Backend zu berücksichtigen. * Optional kann die automatische Erkennung virtueller Server angefordert werden, wenn es sich bei dem Gerät um ein Dual-DNS/LTM-Gerät handelt.

image:f5-dns/new-server.png["Neue Server einrichten"]

In bestimmten Situationen, wie z. B. bei vorübergehenden Netzwerkproblemen oder Firewall-ACL-Regeln zwischen Netzwerkstandorten, werden bei der Hinzufügung einer Remote-Appliance in diesem Stadium möglicherweise keine Einträge für Remote-Appliances mit konfiguriertem LTM bei der virtuellen Servererkennung angezeigt. In solchen Fällen können nach dem Hinzufügen des neuen Geräts („Servers“) die virtuellen Server wie unten angegeben manuell hinzugefügt werden. Wenn Sie eine reine BIG-IP-DNS-Appliance hinzufügen, werden keine virtuellen Server erkannt oder diesem Gerät hinzugefügt.

image:f5-dns/virtual-server.png["Server hinzufügen"]

Wir müssen diese Servereinträge für jedes Gerät in unserer Lösung an allen Standorten hinzufügen, einschließlich BIG-IP DNS-Geräte, BIG-IP LTM-Geräte und aller Geräte, die die Doppelrolle sowohl als DNS- als auch als LTM-Einheiten übernehmen.



==== Schritt drei: Vertrauensverhältnis zwischen allen BIG-IP-Appliances herstellen

Im folgenden Beispiel wurden vier Appliances als Server hinzugefügt; sie sind auf zwei Standorte verteilt. Beachten Sie, dass jeder Standort über einen eigenen BIG-IP DNS-Server und BIG-IP LTM verfügt. Allerdings werden bei allen Geräten außer dem aktuell angemeldeten Gerät blaue Symbole in der Spalte „Status“ angezeigt. Dies bedeutet, dass noch keine Vertrauensbeziehung zu den anderen BIG-IP-Appliances hergestellt wurde.

image:f5-dns/trust1.png["Zertifikatsvertrauen schaffen"]

Um Vertrauen zu schaffen, stellen Sie eine SSH-Verbindung zum BIG-IP her, auf dem die Konfigurationsdetails soeben über die GUI eingegeben wurden, und verwenden Sie das Konto „root“, um auf die BIG-IP-Befehlszeilenschnittstelle zuzugreifen. Geben Sie an der Eingabeaufforderung folgenden einzelnen Befehl ein: _bigip_add_

Der Befehl „bigip_add“ lädt das Verwaltungszertifikat von den Ziel-BIG-IP-Geräten herunter, um es beim Aufbau des verschlüsselten „iQuery“-Kanals zwischen den GSLB-Servern im Cluster zu verwenden. iQuery läuft standardmäßig über TCP-Port 4353 und dient als Heartbeat, um die Synchronisierung der BOG-IP-DNS-Mitglieder zu gewährleisten. Es verwendet XML und Gzip im verschlüsselten Kanal. Wenn "bigip_add" ohne Optionen ausgeführt wird, wird der Befehl für alle BIGIP-Geräte in der GSLB-Serverliste ausgeführt, wobei der aktuelle Benutzername verwendet wird, um eine Verbindung zu den Endpunkten herzustellen. Um den Erfolg schnell zu überprüfen, kehren Sie einfach zur BIG-IP-Benutzeroberfläche zurück und vergewissern Sie sich, dass alle Server nun Zertifikate im angezeigten Dropdown-Menü aufweisen.

image:f5-dns/big-ip-add.png["Zertifikatsvertrauen überprüfen"]



==== Schritt vier: Synchronisieren Sie alle BIG-IP DNS-Appliances mit der DNS-Gruppe

Im letzten Schritt können alle BIG-IP DNS-Appliances vollständig über die TMUI-Benutzeroberfläche eines einzigen Geräts konfiguriert werden. In einem Beispiel, in dem es zwei StorageGRID Standorte gibt, bedeutet dies, dass man nun per SSH auf die Befehlszeile des BIG-IP-DNS des *anderen* Standorts zugreifen muss. Nachdem Sie sich als Root angemeldet und sichergestellt haben, dass die Firewall-Richtlinien/ACLs die Kommunikation der beiden BIG-IP-DNS-Geräte über die TCP-Ports 22 (SSH), 443 (HTTPS) und 4354 (F5 iQuery-Protokoll) erlauben, geben Sie an der Eingabeaufforderung folgenden Befehl ein: _gtm_add <IP-Adresse des ersten BIG-IP-DNS-Servers, an dem zuvor alle GUI-Schritte durchgeführt wurden>_

An diesem Punkt können alle weiteren DNS-Konfigurationsarbeiten auf jedem BIG-IP DNS-Gerät durchgeführt werden, das der Gruppe hinzugefügt wurde. Der obige Befehl gtm_add muss nicht auf Appliance-Mitgliedern angewendet werden, die ausschließlich LTM sind. Nur Appliances, die DNS unterstützen, benötigen diesen Befehl, um Teil der synchronisierten DNS-Gruppe zu werden.



=== Einrichtung von Rechenzentrumsstandorten und Aufbau der Inter-BIG-IP-Kommunikation

An diesem Punkt sind alle Schritte zur Erstellung der zugrunde liegenden, fehlerfreien BIG-IP DNS-Appliance-Gruppe abgeschlossen. Wir können nun mit der Erstellung von Namen, FQDNs, fortfahren, die auf unsere verteilten Web-/S3-Dienste verweisen, die in jedem StorageGRID Rechenzentrum bereitgestellt werden.

Diese Namen werden als „Wide IPs“ oder kurz WIPs bezeichnet und sind normale DNS-FQDNs mit DNS-A-Ressourceneinträgen. Anstatt jedoch wie ein herkömmlicher A-Ressourceneintrag auf einen Server zu verweisen, verweisen sie intern auf Pools von virtuellen BIG-IP-Servern. Jeder Pool kann einzeln aus einem oder mehreren virtuellen Servern bestehen. Ein S3-Client, der eine IP-Adresse zur Namensauflösung anfordert, erhält die Adresse des virtuellen S3-Servers am optimalen, gemäß den Richtlinien ausgewählten StorageGRID Standort.



==== Weite IP-Adressen, Adresspools und virtuelle Server kurz erklärt

Um ein einfaches, fiktives Beispiel zu nennen: Bei einem WIP für den Namen *storage.quantumvault.com* könnte die BIG-IP DNS-Lösung mit zwei Pools potenzieller virtueller Server verknüpft sein. Der erste Pool könnte aus 4 Standorten in Nordamerika bestehen; der zweite Pool könnte aus 3 Standorten in Europa bestehen.

Die Auswahl des Pools könnte durch eine Reihe von politischen Entscheidungen erfolgen; vielleicht könnte ein einfaches Verhältnis von 5:1 verwendet werden, um den Großteil des Datenverkehrs auf nordamerikanische StorageGRID Standorte zu lenken. Wahrscheinlicher ist vielleicht eine topologiebasierte Wahl, bei der der Pool so gewählt wird, dass beispielsweise der gesamte aus Europa stammende S3-Datenverkehr an europäische Standorte geleitet wird und der übrige weltweite S3-Datenverkehr an nordamerikanische Rechenzentren.

Sobald BIG-IP DNS einen Pool ermittelt hat – nehmen wir an, es wurde der nordamerikanische Pool ausgewählt –, kann der tatsächliche DNS-A-Ressourceneintrag, der zur Auflösung von storage.quantumvault.com zurückgegeben wird, einer der vier virtuellen Server sein, die von BIG-IP LTM an einem der vier nordamerikanischen Standorte unterstützt werden. Auch hier ist die Wahl des Standorts richtlinienbasiert. Es gibt einfache „statische“ Verfahren wie Round-Robin, während fortgeschrittenere „dynamische“ Auswahlverfahren wie Leistungstests zur Messung der Latenz jedes Standorts von lokalen DNS-Resolvern durchgeführt und als Kriterium für die Standortauswahl verwendet werden.

Um einen Pool von virtuellen Servern auf einem BIG-IP DNS einzurichten, folgen Sie dem Menüpfad *DNS > GSLB > Pools > Pool List > Add (+)*. In diesem Beispiel sehen wir, wie verschiedene nordamerikanische virtuelle Server zu einem Pool hinzugefügt werden und dass die bevorzugte Methode zum Lastausgleich, wenn dieser Pool ausgewählt wird, nach dem Tiering-Prinzip gewählt wird.

image:f5-dns/new-pool.png["Neuer Pool"]

Wir fügen die WIP (Wide IP), den Namen unseres Dienstes, der per DNS aufgelöst wird, einer Bereitstellung hinzu, indem wir dem Pfad DNS > GSLB > Wide IPs > Wide IP List > Create (+) folgen. Im folgenden Beispiel stellen wir einen beispielhaften WIP für einen S3-fähigen Speicherdienst bereit.

image:f5-dns/wip-config.png["WIP konfigurieren"]



=== DNS zur Unterstützung des globalen Datenverkehrsmanagements anpassen

An diesem Punkt sind alle unsere zugrunde liegenden BIG-IP-Appliances bereit, GSLB (Global Server Load Balancing) durchzuführen. Wir müssen lediglich die für die S3-Datenflüsse verwendeten Namen anpassen und zuweisen, um die Lösung optimal nutzen zu können. Der allgemeine Ansatz besteht darin, einen Teil der bestehenden DNS-Domäne eines Unternehmens an die Kontrolle von BIG-IP DNS zu delegieren. Dies bedeutet, einen Abschnitt des Namensraums, eine Subdomain, zu „exkl. ) und die Kontrolle über diese Subdomain an die BIG-IP DNS-Appliances zu delegieren. Technisch gesehen geschieht dies dadurch, dass sichergestellt wird, dass die BIG-IP DNS-Appliances über A-DNS-Ressourceneinträge (RRs) im Unternehmens-DNS verfügen und diese Namen/Adressen dann zu Name Server (NS)-DNS-Ressourceneinträgen für die delegierte Domäne gemacht werden.

Es gibt heutzutage verschiedene Möglichkeiten für Unternehmen, ihr DNS zu verwalten; eine Methode ist eine vollständig gehostete Lösung. Ein Beispiel hierfür wäre der Betrieb und die Verwaltung von DNS über Windows Server 2025. Eine alternative Vorgehensweise für ein Unternehmen kann darin bestehen, Cloud-DNS-Anbieter wie AWS Route53 oder Squarespace zu nutzen.

Hier ist ein fiktives Beispiel zur Veranschaulichung. Wir haben StorageGRID, das das Lesen und Schreiben von Objekten über das S3-Protokoll mit einer bestehenden, von AWS Route53 verwalteten Domäne unterstützt; die bestehende Beispieldomäne ist f5demo.net.

Wir möchten die Subdomain engineering.f5demo.net den BIG-IP DNS-Appliances für das globale Traffic-Management zuweisen. Dazu erstellen wir einen neuen NS-Ressourceneintrag (Nameserver) für engineering.f5demo.net und verweisen diesen auf die Liste der BIG-IP DNS-Appliance-Namen. In unserem Beispiel haben wir zwei BIG-IP DNS-Appliances, und daher erstellen wir zwei A-Ressourceneinträge dafür.

image:f5-dns/sub-domain.png["Ressourcen-A-Aufzeichnungen"]

Als Beispiel richten wir nun eine Wide IP (WIP) in unserem BIG-IP DNS ein. Da DNS die Gruppensynchronisierung nutzt, müssen wir die Einstellungen nur über die GUI eines Geräts anpassen. Innerhalb der BIG-IP DNS GUI gehen Sie zu *DNS > GSLB > Wide IPs > Wide IP List (+)*. Zur Erinnerung: Bei einer herkömmlichen DNS-FQDN-Konfiguration müsste man eine oder mehrere IPv4-Adressen eingeben; in unserem Fall verweisen wir einfach auf einen oder mehrere Pools von StorageGRID Virtual-Servern.

image:f5-dns/wide-ip-list.png["Liste breiter IP-Adressen"]

In unserem Beispiel verwenden wir generische HTTPS-Webserver, die sich sowohl an Standorten in Ohio als auch in Oregon befinden. Mit einem einfachen „Round-Robin“-Verfahren sollten wir sehen können, wie der globale DNS-Server auf Anfragen nach den A-Resource-Record-Zuordnungen für _www.wip.engineering.f5demo.net_ mit beiden virtuellen Server-IPs antwortet.

image:f5-dns/traffic-rr.png["Verkehrskreisel"]

Ein einfacher Test kann mit Webbrowsern durchgeführt werden oder, im Falle von S3 mit StorageGRID, gegebenenfalls mit grafischen Tools wie S3Browser. Bei jeder DNS-Abfrage wird aufgrund unserer Wahl des Round-Robin-Verfahrens innerhalb des Pools der nächste Rechenzentrumsstandort im Pool als Ziel für den nachfolgenden Datenverkehr verwendet.

In unserem Beispiel-Setup können wir dig oder nslookup verwenden, um schnell eine Reihe von zwei DNS-Abfragen zu generieren und sicherzustellen, dass BIG-IP DNS tatsächlich einen Round-Robin-Lastausgleich durchführt, sodass beide Websites im Laufe der Zeit Datenverkehr erhalten.

image:f5-dns/nslookup.png["nslookup-Beispiel"]



==== Vorschläge zur Erkundung fortgeschrittenerer Techniken

Eine von vielen möglichen Vorgehensweisen wäre die Verwendung des Modus „Globale Verfügbarkeit“ anstelle des oben genannten einfachen Beispiels „Round Robin“. Mit Global Availability kann der Datenverkehr gezielt auf die Reihenfolge der Pools oder virtuellen Server innerhalb eines einzelnen Pools geleitet werden. Auf diese Weise könnte der gesamte S3-Datenverkehr standardmäßig beispielsweise auf einen Standort in New York City umgeleitet werden.

Wenn die Integritätsprüfungen ein Problem mit der Verfügbarkeit von StorageGRID -Knoten an diesem Standort anzeigen, könnte der Datenverkehr zu diesem Zeitpunkt nach St. Louis umgeleitet werden. Sollten in St. Louis gesundheitliche Probleme auftreten, könnte im Gegenzug ein Standort in Frankfurt S3-Lese- oder Schreibvorgänge empfangen. Globale Verfügbarkeit ist somit ein Ansatz zur Gewährleistung der Ausfallsicherheit der gesamten S3 StorageGRID Lösung. Ein anderer Ansatz besteht darin, verschiedene Load-Balancing-Verfahren zu kombinieren, wobei ein gestaffeltes Verfahren zum Einsatz kommt.

image:f5-dns/lb-method.png["Lastverteilungsmethode"]

In diesem Beispiel ist die Option „dynamisch“ die erste Load-Balancing-Option für die Standorte im konfigurierten Pool. Im gezeigten Beispiel wird ein kontinuierlicher Messansatz beibehalten, bei dem die Leistung des lokalen DNS-Resolvers aktiv überwacht wird und der Auslöser für die Standortauswahl ist. Sollte dieser Ansatz nicht verfügbar sein, können die einzelnen Standorte anhand des ihnen jeweils zugeordneten Verhältnisses ausgewählt werden. Durch das Verhältnis können größere StorageGRID Standorte mit höherer Bandbreite mehr S3-Transaktionen empfangen als kleinere Standorte. Schließlich wird, falls im Falle eines Notfalls alle Standorte im Pool ausfallen sollten, die angegebene Fallback-IP-Adresse als letzter Ausweg genutzt. Eine der interessantesten Load-Balancing-Methoden von BIG-IP DNS ist die „Topologie“. Dabei wird die eingehende Quelle der DNS-Anfragen, der lokale DNS-Resolver des S3-Benutzers, beobachtet und anhand von Informationen zur Internettopologie der scheinbar „nächstgelegene“ Standort aus dem Pool ausgewählt.

Schließlich, wenn sich die Standorte über den gesamten Globus erstrecken, lohnt es sich möglicherweise, die Verwendung der dynamischen „Probe“-Technologie in Betracht zu ziehen, die im F5 BIG-IP DNS-Handbuch ausführlich beschrieben wird. Mithilfe von Sonden können häufige Quellen von DNS-Anfragen überwacht werden, beispielsweise ein Geschäftspartner, dessen Datenverkehr im Allgemeinen denselben lokalen DNS-Resolver verwendet. BIG-IP DNS-Probes können vom BIG-IP LTM an jedem Standort weltweit gestartet werden, um allgemein zu ermitteln, welcher potenzielle Standort voraussichtlich die niedrigste Latenz für S3-Transaktionen bietet. Daher könnte der Datenverkehr aus Asien besser von asiatischen StorageGRID Standorten bedient werden als von Standorten in Nordamerika oder Europa.



== Schlussfolgerung

Die Integration von F5 BIG-IP mit NetApp StorageGRID adressiert technische Herausforderungen im Zusammenhang mit der Datenverfügbarkeit und -konsistenz über mehrere Standorte hinweg sowie der Optimierung des S3-Transaktionsroutings. Durch den Einsatz dieser Lösung werden Speicherstabilität, Leistung und Zuverlässigkeit verbessert, wodurch sie sich ideal für Unternehmen eignet, die eine robuste, skalierbare und flexible Speicherinfrastruktur suchen.

Weitere Informationen finden Sie in der offiziellen F5-Dokumentation für BIG-IP DNS unter diesem Link. https://techdocs.f5.com/kb/en-us/products/big-ip-dns/manuals/product/bigip-dns-concepts-12-0-0.html["Link"^]Die Ein geführter Leitfaden für den Unterricht, der Schritt-für-Schritt-Anleitungen für ein Beispiel-Setup bietet, ist ebenfalls verfügbar. https://clouddocs.f5.com/training/community/dns/html/class1/class1.html["Hier"^]Die
